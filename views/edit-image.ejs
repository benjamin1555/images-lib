<%- include('includes/head.ejs') %>
<%- include('includes/navigation.ejs') %>

<h3 class="font-weight-light text-center text-lg-left mt-3 mb-0"><%= editing ? 'Edit' : 'Upload' %> Image</h3>
<hr class="mt-2 mb-4">

<div class="d-flex flex-column align-items-center">
  <% if (validationErrors.length > 0) { %>
    <div class="alert alert-danger w-50 text-center" role="alert">
      <p>Could not upload picture:</p>
      <ul>
        <% validationErrors.forEach(error => { %>
          <li>- <%= error.msg %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>

  <form action="<%= editing ? '/edit-image' : '/add-image' %>" method="POST" class="w-50">
    <div class="form-group">
      <label for="imageUrl" class="form-label">Image Url</label>
      <input type="url" name="imageUrl" id="imageUrl" class="form-control" value="<%= editing ? image.imageUrl : 'https://images.unsplash.com/photo-1526417501781-5e7e587b7686?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1650&q=80' %>">
    </div>
    <div class="form-group">
      <label for="tags" class="form-label">Image Tags</label>
      <input type="text" name="tags" id="tags" aria-describedby="tagsHelp" class="form-control" value="<%= editing ? image.tags.join(' ') : '' %>">
      <small id="tagsHelp" class="form-text text-muted">Enter tags separated by spaces.</small>
    </div>
    <input type="hidden" name="imageId" value="<%= editing ? image._id : '' %>">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
    <button type="submit" class="btn btn-primary mt-3 w-100"><%= editing ? 'Edit' : 'Upload' %></button>
  </form>
</div>

<%- include('includes/end.ejs') %>